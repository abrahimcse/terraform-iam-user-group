# AWS IAM Team Setup using Terraform

This Terraform module provisions IAM users, groups, policies, and group memberships for different teams (Manager, Developer, QA, DevOps) in an AWS account. It supports optional console login profile creation for each user.

---

## 📁 Module Structure

```
terraform-iam-user-group/
│
├── main.tf
├── variables.tf
├── outputs.tf
├── version.tf
├── terraform.tf
└── modules/
    └── iam/
       ├── main.tf
       ├── variables.tf
       ├── outputs.tf
       └── policies/
           ├── dev_policy.json
           ├── qa_policy.json
           └── devops_policy.json
```


---

## 🔧 Features

- Creates IAM users and groups
- Assigns users to their respective groups
- Attaches policies to each group
- Optionally creates console login profiles with autogenerated passwords
- Outputs login credentials (securely)

---

## 📦 Module Inputs

| Name                   | Type          | Description                             | Default                |
|------------------------|---------------|-----------------------------------------|------------------------|
| `project_name`         | `string`      | Project prefix for naming resources     | `"crystal-automation"` |
| `manager_users`        | `list(string)`| List of manager usernames               | `[]`                   |
| `dev_users`            | `list(string)`| List of developer usernames             | `[]`                   |
| `qa_users`             | `list(string)`| List of QA usernames                    | `[]`                   |
| `devops_users`         | `list(string)`| List of DevOps usernames                | `[]`                   |
| `enable_password_login`| `bool`        | Whether to enable console login         | `true`                 |

---

## 🔐 IAM Policies

Each group has a corresponding policy:

- **Manager Policy (`manager_policy.json`)** – Full administrative access to all AWS services.
- **Dev Policy (`dev_policy.json`)** – Full access to EC2, S3, Lambda, API Gateway
- **QA Policy (`qa_policy.json`)** – Read-only access to S3, EC2, CloudWatch
- **DevOps Policy (`devops_policy.json`)** – Full administrative access to all AWS services.

> 📁 These policies are stored in the `policies/` folder.

---

## 🚀 Usage Example

```hcl
provider "aws" {
  region = "ap-southeast-1"
}

module "team_iam" {
  source = "./modules/iam"

  project_name   = "crystal-automation"
  manager_users  = ["roni"]
  dev_users      = ["sadaf"]
  qa_users       = ["asif"]
  devops_users   = ["abrahim"]
}
```

## Notes
- Passwords are auto-generated with 20 characters length
- Users are required to reset their password on first login
- All resources are tagged with the project name for identification
- The module outputs sensitive credentials only if enable_password_login is true